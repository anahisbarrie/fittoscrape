<!-- <!DOCTYPE html>
<html lang="en-us">

<head>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
        integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <meta charset="UTF-8">
    <title>Scraping W/ Mongoose</title>
    <style>
        body {
            /* background-color: #979bad; */
            background-image: url(https://cdn.makeawebsitehub.com/wp-content/uploads/2016/02/learn-code-e1455713167295.jpg);
        }

        #wrapper {
            width: 960px;
            margin-left: auto;
            margin-right: auto;
            padding-top: 5%;
        }

        #questions {
            display: inline-block;
            overflow: auto;
            width: 60%;
            height: 700px;
            font-weight: bold;
        }

        #notes {
            float: right;
            width: 30%;
            color: black;
            background-color: #979bad;
            padding: 15px;
        }

        textarea,
        input {
            display: block;
            width: 100%;
            background-color: #979bad;
        }

        input {
            height: 150px;
            font-size: 24px;
        }

        textarea {
            height: 100px;
            font-size: 18px;
        }

        .container {
            position: relative !important;
            margin: 0 auto !important;
            width: 960px !important;
            font-size: 15px;
            border-radius: 20px;
            padding: 20px;
            background-color: #7ba7fb !important;
            text-align: justify;
        }

        nav.navbar.navbar-expand-lg.navbar-dark.bg-dark.text-white {
            background-color: #232e5e !important;
        }

        ul nav.navbar-nav.navbar-right {
            position: right !important;
        }

        .navbar.navbar-light.bg-light {
            width: 100%;
            background-color: #232e5e !important;
            padding: 0px;
            border-top: 40px solid #232e5e;
        }
    </style>
</head>

<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark text-white">
        <span class="navbar-brand mb-1 h1">All the Coding Questions That's Fit to Scrape</span>
    </nav>
    <div id="wrapper">
        <h1>Questions</h1>
        <h2><i></i></h2>
        <div class="container">
            <div id="questions"></div>
            <div id="notes"></div>
        </div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="javascript/app.js"></script>

    <br>
    <br>

    <nav class="navbar navbar-light bg-light">
        <span class="navbar-brand mb-0 h1"></span>
    </nav>

</body>

</html> -->

<!DOCTYPE html>
<html lang="en-us">

<head>
    <meta charset="UTF-8">
    <title>Scraping With Mongoose</title>
    <style>
        body {
            background-color: #F2F6D0
        }

        #wrapper {
            width: 960px;
            margin-left: auto;
            margin-right: auto;
            padding-top: 5%;
        }

        /* #articles {
            display: inline-block;
            overflow: auto;
            width: 60%;
            height: 700px;
        }

        #notes {
            float: right;
            width: 30%;
        }

        textarea,
        input {
            display: block;
            width: 100%;
            background-color: #FCF5C7;
        }

        input {
            height: 36px;
            font-size: 24px;
        }

        textarea {
            height: 200px;
            font-size: 18px;
        } */
    </style>
</head>

<body>
    <div id="wrapper">
        <h1>Note Scraper</h1>
        <a href="/scrape">Scrape</a>
        <h2><i>If you can do this...the homework should be no problem.</i></h2>
        <div id="articles"></div>
        <div id="notes"></div>
        <div id="questions"></div>
      
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <!-- <script src="app.js"></script> -->
    <script>
        $(document).ready(function () {

                // Grab the questions as a json
                $.getJSON("/questions", function (data) {
                    console.log(data);
                    // For each one
                    for (var i = 0; i < data.length; i++) {
                        // Display the apropos information on the page
                        $("#questions").append("<li data-id='" + data[i]._id + "'>" + data[i].title + "<br />" + data[i].link + "</li>" + "<br />" + "<br />");
                    }
                });

                // Whenever someone clicks a li tag
                $(document).on("click", "li", function () {
                    // Empty the notes from the note section
                    $("#notes").empty();
                    // Save the id from the li tag
                    var thisId = $(this).attr("data-id");

                    // Now make an ajax call for the Article
                    $.ajax({
                        method: "GET",
                        url: "/questions/" + thisId
                    })
                        // With that done, add the note information to the page
                        .then(function (data) {
                            console.log(data);
                            // The title of the article
                            $("#notes").append("<h2>" + data.title + "</h2>");
                            // An input to enter a new title
                            $("#notes").append("<input id='titleinput' name='title' >");
                            // A textarea to add a new note body
                            $("#notes").append("<textarea id='bodyinput' name='body'></textarea>");
                            // A button to submit a new note, with the id of the article saved to it
                            $("#notes").append("<button data-id='" + data._id + "' id='savenote'>Save Note</button>");

                            // If there's a note in the article
                            if (data.note) {
                                console.log("data.note", data.note)
                                // Place the title of the note in the title input
                                $("#titleinput").val(data.note.title);
                                // Place the body of the note in the body textarea
                                $("#bodyinput").val(data.note.body);
                            }
                        });
                });

                // When you click the savenote button
                $(document).on("click", "#savenote", function () {
                    // Grab the id associated with the article from the submit button
                    var thisId = $(this).attr("data-id");

                    // Run a POST request to change the note, using what's entered in the inputs
                    $.ajax({
                        method: "POST",
                        url: "/questions/" + thisId,
                        data: {
                            // Value taken from title input
                            title: $("#titleinput").val(),
                            // Value taken from note textarea
                            body: $("#bodyinput").val()
                        }
                    })
                        // With that done
                        .then(function (data) {
                            // Log the response
                            console.log(data);
                            // Empty the notes section
                            $("#notes").empty();
                        });

                    // Also, remove the values entered in the input and textarea for note entry
                    $("#titleinput").val("");
                    $("#bodyinput").val("");
                });


            })

    </script>
</body>

</html>